<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>SPINS</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <div id="app">
        <header class="header">
            <div class="user-info">
                <div style="font-size: 12px; opacity: 0.7;">Welcome,</div>
                <div id="username" style="font-weight: bold;">Loading...</div>
            </div>
            <div class="balance-badge">
                <span id="rank-icon" style="font-size:16px;">üå±</span>
                üíé <span id="balance">0</span> TON
            </div>
        </header>

        <!-- –≠–ö–†–ê–ù SPINS (–ò–ì–†–ê –° –ë–û–¢–ê–ú–ò) -->
        <div id="screen-spins" class="screen active">
            <div class="wheel-container">
                <canvas id="wheel" width="300" height="300"></canvas>
                <div class="wheel-arrow">‚ñº</div>
            </div>
            
            <div class="controls">
                <div class="bet-selector">
                    <button class="bet-btn" onclick="changeBet(-100)">-</button>
                    <span id="currentBet">100</span>
                    <button class="bet-btn" onclick="changeBet(100)">+</button>
                </div>
                <button id="spinBtn" class="main-btn">SPIN FOR <span id="btnAmount">100</span> TON</button>
                <div style="margin-top: 15px; font-size: 12px; color: #666;">
                    üé≤ –®–∞–Ω—Å 40% ‚Ä¢ üíé –®–∞–Ω—Å —Å—Ç–∞—Ç—É–∏ 5%
                </div>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù PVP -->
        <div id="screen-pvp" class="screen">
            <h2 style="margin-bottom: 10px;">‚öîÔ∏è PvP –õ–æ–±–±–∏</h2>
            <div style="color: #666; font-size: 12px; margin-bottom: 20px;">
                Online: <span id="onlineCount">0</span>
            </div>

            <button class="create-room-btn" onclick="createRoom()">
                + –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
            </button>
            
            <h3 style="font-size: 14px; margin-bottom: 10px;">–û—Ç–∫—Ä—ã—Ç—ã–µ –∫–æ–º–Ω–∞—Ç—ã</h3>
            <div id="roomList" class="room-list"></div>
        </div>

        <!-- –≠–ö–†–ê–ù –ö–û–ú–ù–ê–¢–´ PVP -->
        <div id="screen-room" class="screen">
            <button onclick="leaveRoom()" style="background:none; border:none; color:#007aff; margin-bottom:10px;">‚Üê –ù–∞–∑–∞–¥</button>
            <h2 id="roomIdDisplay">–ö–æ–º–Ω–∞—Ç–∞ #...</h2>
            
            <div class="players-grid" id="playersGrid"></div>
            
            <div id="pvp-wheel-container" style="display:none; margin:20px 0;">
                <canvas id="pvp-wheel" width="300" height="300"></canvas>
            </div>
            
            <div style="margin-top: auto; padding: 20px 0;">
                <div style="text-align: center; margin-bottom: 10px; color: #888;" id="roomStatus"></div>
                <button id="readyBtn" class="main-btn" onclick="sendReady()">–ì–û–¢–û–í</button>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù –ú–ê–†–ö–ï–¢–ê -->
        <div id="screen-market" class="screen">
            <h2 style="margin-bottom: 10px;">üõçÔ∏è –ú–∞—Ä–∫–µ—Ç</h2>
            
            <div id="userInventory" class="inventory-section"></div>
            
            <h3>–ü—Ä–æ–¥–∞–∂–∞ —Å—Ç–∞—Ç—É–π</h3>
            <div id="marketList" class="market-list"></div>
        </div>

        <!-- –≠–ö–†–ê–ù –ü–†–û–§–ò–õ–Ø -->
        <div id="screen-profile" class="screen">
            <h2 style="margin-bottom: 10px;">üë§ –ü—Ä–æ—Ñ–∏–ª—å</h2>
            <div id="profileInfo" class="profile-info"></div>
        </div>

        <!-- –ù–ò–ñ–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
        <nav class="bottom-nav">
            <button class="nav-item active" onclick="switchTab('spins')">
                <span class="nav-icon">üéÅ</span> Spins
            </button>
            <button class="nav-item" onclick="switchTab('pvp')">
                <span class="nav-icon">‚öîÔ∏è</span> PvP
            </button>
            <button class="nav-item" onclick="switchTab('market')">
                <span class="nav-icon">üõçÔ∏è</span> Market
            </button>
            <button class="nav-item" onclick="switchTab('profile')">
                <span class="nav-icon">üë§</span> Profile
            </button>
        </nav>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–ê -->
    <div id="resultModal" class="modal-overlay">
        <div class="modal">
            <h2 id="modalTitle">YOU WON!</h2>
            <div id="modalAmount" class="win-amount">+400 TON</div>
            <p id="modalMsg" style="color:#888;">Winner: You</p>
            <button class="main-btn" onclick="closeModal()">–ü–†–ò–ù–Ø–¢–¨</button>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ê –°–¢–ê–¢–£–ò -->
    <div id="statueModal" class="modal-overlay">
        <div class="modal">
            <h2 style="color:#ffd700;">‚ú® –ù–ê–ô–î–ï–ù–ê –°–¢–ê–¢–£–Ø!</h2>
            <div style="font-size:48px; margin:10px 0;" id="statueEmoji"></div>
            <div style="font-size:20px; font-weight:bold;" id="statueName"></div>
            <div style="color:#666;" id="statueRarity"></div>
            <div style="color:#34c759; margin:10px 0;" id="statueBonus"></div>
            <button class="main-btn" onclick="closeModal()">–û–¢–õ–ò–ß–ù–û!</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
